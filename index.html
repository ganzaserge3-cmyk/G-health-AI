<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè•</text></svg>">
    <!-- In the <head> section -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%2310a37f%22>üè•</text></svg>">

<!-- In the chat-header -->
<div class="logo-simple">
    <div class="logo-circle">
        <span class="logo-heart">‚ù§Ô∏è</span>
        <span class="logo-ai">AI</span>
    </div>
    <span class="logo-name">Health Guard</span>
</div>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <button class="new-chat-btn" id="newChatBtn">
                    <i class="fas fa-plus"></i>
                    <span>New Chat</span>
                </button>
            </div>
            
            <div class="chat-history-container">
                <h3><i class="fas fa-history"></i> Recent Chats</h3>
                <div class="chat-history" id="chatHistory">
                    <!-- Chat history will be dynamically loaded here -->
                    <div class="empty-history">
                        <i class="fas fa-comment-medical"></i>
                        <p>No chat history yet</p>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="avatar">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="user-info">
                        <span class="username">Health Assistant</span>
                        <span class="user-status">Online</span>
                    </div>
                </div>
                <button class="settings-btn" id="settingsBtn" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="chat-header">
                  <h1>
                     <i class="fas fa-shield-heart" style="color: #10a37f; margin-right: 10px;"></i>Health Guard AI
                     <small style="display: block; font-size: 14px; color: #8e8ea0; font-weight: normal;">Your AI Medical Assistant
        </small>
    </h1>
                <div class="header-actions">
                    <button class="header-btn" id="clearHistoryBtn" title="Clear History">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="header-btn" id="themeToggleBtn" title="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </header>

            <!-- Chat Messages Container -->
            <div class="chat-container" id="chatContainer">
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-icon">
                        <i class="fas fa-stethoscope"></i>
                    </div>
                    <h2>Welcome to Health Guard AI</h2>
                    <p>Your trusted AI medical assistant. Ask me anything about symptoms, medications, general health advice, or upload an image for analysis.</p>
                    
                    <div class="welcome-features">
                        <div class="feature">
                            <i class="fas fa-shield-alt"></i>
                            <span>Privacy Protected</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-bolt"></i>
                            <span>Instant Responses</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-camera"></i>
                            <span>Image Analysis</span>
                        </div>
                    </div>
                    
                    <div class="quick-questions">
                        <button class="quick-btn" data-question="What are common symptoms of COVID-19?">
                            <i class="fas fa-virus"></i> COVID Symptoms
                        </button>
                        <button class="quick-btn" data-question="How can I lower my blood pressure naturally?">
                            <i class="fas fa-heart"></i> Lower BP
                        </button>
                        <button class="quick-btn" data-question="What foods help with digestion and gut health?">
                            <i class="fas fa-apple-alt"></i> Digestion
                        </button>
                        <button class="quick-btn" data-question="When should I see a doctor for persistent headaches?">
                            <i class="fas fa-head-side-virus"></i> Headaches
                        </button>
                        <button class="quick-btn" data-question="How to manage stress and anxiety effectively?">
                            <i class="fas fa-brain"></i> Stress
                        </button>
                        <button class="quick-btn" data-question="What are signs of dehydration to watch for?">
                            <i class="fas fa-tint"></i> Dehydration
                        </button>
                    </div>
                    
                    <div class="safety-notice">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p><strong>Important:</strong> This AI provides general health information only. Always consult a healthcare professional for medical advice, diagnosis, or treatment.</p>
                    </div>
                </div>

                <!-- Messages will be appended here dynamically -->
            </div>

            <!-- Scroll Down Button -->
            <button class="scroll-down-btn" id="scrollDownBtn" title="Scroll to bottom">
                <i class="fas fa-arrow-down"></i>
            </button>

            <!-- Input Area -->
            <div class="input-container">
                <div class="input-wrapper">
                    <div class="upload-btn-container">
                        <button class="upload-btn" id="uploadBtn" title="Upload Image (Ctrl+I)">
                            <i class="fas fa-image"></i>
                        </button>
                        <input type="file" id="imageUpload" accept="image/*" style="display: none;" capture="environment">
                    </div>
                    
                    <div class="message-input-wrapper">
                        <textarea 
                            id="messageInput" 
                            placeholder="Describe your health concern or upload an image for analysis..." 
                            rows="1"
                            autocomplete="off"
                            spellcheck="true"
                        ></textarea>
                        <div class="input-actions">
                            <button class="microphone-btn" id="microphoneBtn" title="Voice Input (Coming Soon)">
                                <i class="fas fa-microphone"></i>
                            </button>
                            <button class="send-btn" id="sendBtn" title="Send Message (Enter)">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="input-footer">
                    <div class="disclaimer">
                        <i class="fas fa-info-circle"></i>
                        <span>Health Guard AI can make mistakes. Always verify important information with healthcare providers.</span>
                    </div>
                    <div class="shortcuts">
                        <kbd>Enter</kbd> to send ‚Ä¢ <kbd>Shift+Enter</kbd> for new line ‚Ä¢ <kbd>Ctrl+I</kbd> for image
                    </div>
                </div>
            </div>

            <!-- Preview Image Modal -->
            <div class="modal" id="imagePreviewModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3><i class="fas fa-image"></i> Image Preview</h3>
                        <button class="close-modal" id="closeModal" title="Close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="image-container">
                            <img id="previewImage" src="" alt="Preview of uploaded image">
                        </div>
                        <div class="image-info">
                            <p>Image ready for analysis. Describe what you see or ask a question about it.</p>
                        </div>
                        <div class="image-actions">
                            <button class="action-btn remove-btn" id="removeImage">
                                <i class="fas fa-trash"></i> Remove Image
                            </button>
                            <button class="action-btn use-btn" id="useImage">
                                <i class="fas fa-check"></i> Use in Chat
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Modal -->
            <div class="modal" id="settingsModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3><i class="fas fa-cog"></i> Settings</h3>
                        <button class="close-modal" id="closeSettingsModal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="settings-section">
                            <h4><i class="fas fa-key"></i> API Configuration</h4>
                            <div class="setting-item">
                                <label for="apiKeyInput">Gemini API Key:</label>
                                <div class="input-group">
                                    <input type="password" id="apiKeyInput" placeholder="Enter your Gemini API key">
                                    <button class="action-btn" id="saveApiKey">
                                        <i class="fas fa-save"></i> Save
                                    </button>
                                </div>
                                <small class="help-text">
                                    Get your free API key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a>
                                </small>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h4><i class="fas fa-paint-brush"></i> Appearance</h4>
                            <div class="setting-item">
                                <label>Theme:</label>
                                <div class="theme-options">
                                    <button class="theme-btn active" data-theme="dark">
                                        <i class="fas fa-moon"></i> Dark
                                    </button>
                                    <button class="theme-btn" data-theme="light">
                                        <i class="fas fa-sun"></i> Light
                                    </button>
                                    <button class="theme-btn" data-theme="auto">
                                        <i class="fas fa-adjust"></i> Auto
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h4><i class="fas fa-database"></i> Data Management</h4>
                            <div class="setting-item">
                                <button class="action-btn warning-btn" id="clearAllData">
                                    <i class="fas fa-trash"></i> Clear All Chat History
                                </button>
                                <small class="help-text">This will permanently delete all your conversations</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notification Toast -->
            <div class="toast" id="notificationToast">
                <div class="toast-content">
                    <i class="toast-icon"></i>
                    <span class="toast-message"></span>
                </div>
                <button class="toast-close">&times;</button>
            </div>
        </main>
    </div>

    <!-- JavaScript Files -->
    <script src="config.js"></script>
    <script src="api-service.js"></script>
    <script src="chat-history.js"></script>
    <script src="image-handler.js"></script>
    <script src="script.js"></script>
    
    <!-- Inline JavaScript for Quick Setup -->
    <script>
        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Health Guard AI Initializing...');
            
            // Check for config.js
            if (typeof window.HealthGuardConfig === 'undefined') {
                console.warn('‚ö†Ô∏è config.js not found. Creating default config...');
                window.HealthGuardConfig = {
                    API_KEY: "",
                    getApiKey: function() {
                        return this.API_KEY || localStorage.getItem('gemini_api_key');
                    },
                    setApiKey: function(key) {
                        this.API_KEY = key;
                        localStorage.setItem('gemini_api_key', key);
                        return true;
                    }
                };
            }
            
            // Show welcome message
            setTimeout(function() {
                console.log('‚úÖ Health Guard AI Ready!');
                showNotification('Welcome to Health Guard AI!', 'success');
            }, 1000);
        });
        
        // Helper function for notifications
        function showNotification(message, type = 'info') {
            const toast = document.getElementById('notificationToast');
            const icon = toast.querySelector('.toast-icon');
            const msg = toast.querySelector('.toast-message');
            
            if (!toast) return;
            
            // Set content
            msg.textContent = message;
            
            // Set icon based on type
            const icons = {
                'success': 'fas fa-check-circle',
                'error': 'fas fa-exclamation-circle',
                'warning': 'fas fa-exclamation-triangle',
                'info': 'fas fa-info-circle'
            };
            icon.className = 'toast-icon ' + (icons[type] || icons.info);
            
            // Set color
            toast.className = 'toast ' + type;
            
            // Show toast
            toast.classList.add('show');
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                toast.classList.remove('show');
            }, 5000);
            
            // Close button
            toast.querySelector('.toast-close').onclick = () => {
                toast.classList.remove('show');
            };
        }
        
        // Handle keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl+I for image upload
            if (e.ctrlKey && e.key === 'i') {
                e.preventDefault();
                document.getElementById('uploadBtn').click();
            }
            
            // Escape to close modals
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.show').forEach(modal => {
                    modal.classList.remove('show');
                });
            }
        });
    </script>
</body>
</html>